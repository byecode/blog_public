{"meta":{"title":"ä¸å·²","subtitle":"ä½è°ƒåšäººï¼Œé«˜è°ƒåšäº‹","description":"ä¸å¿µè¿‡å»ï¼Œä¸æƒ§æœªæ¥","author":"zyw","url":"https://zyw.io","root":"/"},"pages":[{"title":"æ–‡ç« åˆ†ç±»","date":"2020-02-23T09:32:05.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"categories/index.html","permalink":"https://zyw.io/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2020-02-23T09:31:47.000Z","updated":"2021-01-12T13:20:50.480Z","comments":true,"path":"tags/index.html","permalink":"https://zyw.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"ä¸ºä»€ä¹ˆè¦æ”¯æŒæ­£ç‰ˆï¼Ÿ","slug":"why_support_copyright","date":"2020-03-24T09:05:34.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2020/03/24/why_support_copyright/","link":"","permalink":"https://zyw.io/2020/03/24/why_support_copyright/","excerpt":"","text":"1ï¼Œå…è´¹çš„æ˜¯æœ€è´µçš„2ï¼Œç›—ç‰ˆè½¯ä»¶é€¼äº‹å„¿å¤š3ï¼Œå°å‚è½¯ä»¶åˆ«å»ç”¨","categories":[{"name":"å¿ƒæƒ…","slug":"å¿ƒæƒ…","permalink":"https://zyw.io/categories/%E5%BF%83%E6%83%85/"}],"tags":[{"name":"copyright","slug":"copyright","permalink":"https://zyw.io/tags/copyright/"}]},{"title":"ffdjangoæ–°åŠŸèƒ½get--ç›´æ’­æ¨æµ","slug":"ffdjangoæ–°åŠŸèƒ½get-ç›´æ’­æ¨æµ","date":"2020-03-03T15:21:45.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2020/03/03/ffdjangoæ–°åŠŸèƒ½get-ç›´æ’­æ¨æµ/","link":"","permalink":"https://zyw.io/2020/03/03/ffdjango%E6%96%B0%E5%8A%9F%E8%83%BDget-%E7%9B%B4%E6%92%AD%E6%8E%A8%E6%B5%81/","excerpt":"","text":"WIP æ‰¹é‡ç¦»çº¿è§†é¢‘ ä¸‹è½½å®Œæ¯•ä¹‹åè½¬æ¢ä¸ºåª’ä½“å¯¹è±¡ åª’ä½“å¯¹è±¡æ‰¹é‡è½¬æ¢ä¸ºç›´æ’­æ ¼å¼åª’ä½“ åˆ›å»ºç›´æ’­å• å¼€å¯ç›´æ’­ ç„¶è€Œå¥½æ™¯ä¸é•¿ï¼Œäº”åˆ†é’Ÿå°±è¢«å°äº†ï¼Œå¤´æ¡ç›´æ’­è¿˜æ˜¯ç‹ å•Š","categories":[{"name":"python","slug":"python","permalink":"https://zyw.io/categories/python/"}],"tags":[{"name":"ffdjango","slug":"ffdjango","permalink":"https://zyw.io/tags/ffdjango/"}]},{"title":"è‡ªå»ºgitæœåŠ¡å™¨","slug":"è‡ªå»ºgitæœåŠ¡å™¨","date":"2020-03-02T05:07:56.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2020/03/02/è‡ªå»ºgitæœåŠ¡å™¨/","link":"","permalink":"https://zyw.io/2020/03/02/%E8%87%AA%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"","text":"ç»¿èŒ¶Git","categories":[],"tags":[]},{"title":"Androidä¸­å¤šè¿›ç¨‹ä¸IPCçš„æ©æ€¨æƒ…ä»‡","slug":"android_multiprocess_and_ipc","date":"2020-02-26T10:22:15.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2020/02/26/android_multiprocess_and_ipc/","link":"","permalink":"https://zyw.io/2020/02/26/android_multiprocess_and_ipc/","excerpt":"","text":"é¢˜è®° å¯èƒ½å¯¹å¤§éƒ¨åˆ†äººæ¥è®²ï¼ŒAndroidå¤šè¿›ç¨‹é€šä¿¡è²Œä¼¼æ²¡ä»€ä¹ˆç”¨ï¼Œå¾ˆå°‘æœ‰äººä½¿ç”¨è¿‡ android:process=â€â€ è¿™ä¸ªå±æ€§ï¼Œä¸è¿‡å¯¹äºä¸€äº›ç¹é‡çš„ï¼Œç”šè‡³å¯ä»¥æˆä¸ºä¸€ä¸ªå•ç‹¬çš„Appèˆ¬çš„ä¸šåŠ¡çš„moduleï¼Œæ”¾åœ¨ä¸»è¿›ç¨‹ï¼Œä¸ä»…ä¼šäº’ç›¸å½±å“åˆ°å…¶ç¨³å®šæ€§ï¼ˆæƒ³æƒ³å¦‚æœè¿™ä¸ªä¸šåŠ¡æ˜¯å¤–éƒ¨çš„ï¼Œé‚£ä½ ä»¬éœ€è¦battleå¤šä¹…ï¼Ÿï¼‰ è·¨è¿›ç¨‹é€šä¿¡çš„ä¸€èˆ¬å§¿åŠ¿ å¤šè¿›ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸è§çš„å§¿åŠ¿æœ‰å“ªäº›å‘¢ï¼Ÿ å¼•å­ï¼šAIDLAIDLï¼ˆAndroid Interface Define Languageï¼‰ä½œä¸ºæœ€åŸºç¡€ï¼Œåšå¸¸è§çš„è¿œç¨‹é€šä¿¡å§¿åŠ¿ï¼Œå¸¸å¸¸åœ¨å„ç±»çš„ åŸºç¡€ã€å…¥é—¨ã€ç”šè‡³æ˜¯è¯´é‚£äº›æ”¶è´¹çš„æ–‡ç« ä¸­æåŠï¼Œå…¶ä½¿ç”¨å§¿åŠ¿å¸¸å¸¸æœ‰ä»¥ä¸‹çš„æ­¥éª¤ï¼š 1,å®šä¹‰AIDLæ–‡ä»¶: 2,é€šä¿¡è¿‡ç¨‹ æ²¡é”™ï¼Œä½ ä¸€å®šå¾ˆå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆæˆ‘æ²¡æœ‰æåˆ°é‚£äº›å¾ˆå¤šæ–‡ç« ä¸­éƒ½æåˆ°çš„ Service ï¼Ÿ ä¸é”™ï¼Œè™½ç„¶Servieæ˜¯AIDLï¼ˆæˆ–è€…è¯´æ˜¯AIDLç”Ÿæˆçš„Binderï¼‰æœ€å¸¸è§çš„è½½ä½“ï¼Œä¸è¿‡ï¼Œæ­¤å¤„æˆ‘ä»¬åº”è¯¥ç†è§£çš„æ˜¯ï¼ŒçœŸæ­£å‚ä¸é€šä¿¡è¿‡ç¨‹çš„æ˜¯Binderï¼ŒParcelï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ â€œå››å¤§ç»„ä»¶â€ Binderé€šä¿¡çš„æµç¨‹ï¼Œåœ¨åˆ«çš„æ–‡ç« ä¸­éƒ½å·²ç»è¯´çš„å¾ˆé€å½»äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å†æ‹¿å›æ¥ï¼Œè®²è®²å…¶ä¸­çš„é‡è¦ä¹‹å¤„ï¼š å¤§éƒ¨åˆ†äººè§åˆ°çš„binderåº”è¯¥éƒ½æ˜¯è¿™ä¸ªæ ·å­çš„ã€‚æ­£å¦‚å›¾ä¸Šå›¾ï¼Œbinderä¹Ÿç¡®å®æ˜¯è¿™ä¸ªæ ·å­äº†ã€‚å¯æ˜¯å¤§éƒ¨åˆ†æ–‡ç« ä¸­éƒ½å°‘æåŠäº†ä¸€ç‚¹ï¼ŒBinderä¹Ÿæ˜¯å¯ä»¥é€šè¿‡Bundleä¼ è¾“çš„è¿™å°±èƒ½å‘æŒ¥æ— é™çš„æƒ³è±¡åŠ›ï¼Œæ¯”å¦‚ï¼š æˆ‘ä»¬å¸¸è§çš„æ“ä½œï¼ŒActivityOne â€“å¯åŠ¨â€“&gt; ActivityTwo, ç„¶åtwoç»è¿‡æ“ä½œï¼Œåœ¨ActivityOneä¸­æ¥å—ç»“æœã€‚ ActivityOne 1234567891011121314151617181920212223242526public class ActivityOne extends Activity&#123; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); findViewById(R.id.test_al).setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Intent intent = new Intent(ActivityOne.this,ActivityTwo.class); startActivityForResult(intent,0); &#125; &#125;); &#125; @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; super.onActivityResult(requestCode, resultCode, data); if(resultCode == RESULT_OK)&#123; switch (resultCode)&#123; ////do something &#125; &#125; &#125;&#125; ActivityTwo.java 1234567891011public class ActivityTwo extends Activity &#123; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); new Handler().postDelayed(() -&gt; &#123; Intent intent = new Intent(); intent.putExtra(\"status\", \"ok\"); setResult(RESULT_OK, intent); &#125;, 2000); &#125;&#125; è¿™æ˜¯ä¸€èˆ¬çš„ä½¿ç”¨å§¿åŠ¿ï¼Œå½“ç„¶ï¼Œè¿˜ä¼šæœ‰æ›´ç®€å•çš„æ–¹æ¡ˆæ¯”å¦‚EventBus\\RxBus\\LiveBusç­‰äº‹ä»¶æ€»çº¿ã€‚ä¹Ÿå¯ä»¥å¹²è„†å†™ä¸ªé™æ€çš„Listeneræ¥æ¥å—callbackã€‚æ€»ä¹‹ï¼Œåƒå¥‡ç™¾æ€ªçš„å§¿åŠ¿éƒ½æœ‰ã€‚ é‚£ä¹ˆï¼Œä½ ä½¿ç”¨è¿‡ä¸‹é¢è¿™æ ·çš„å§¿åŠ¿å—ï¼Ÿ ActivityOne 1234567891011IView2Result.Stub stub = new IView2Result.Stub() &#123; @Override public void onResult(String data) throws RemoteException &#123; Log.e(\"onResult\", data); &#125;&#125;;Intent intent = new Intent(this,ActivityTwo.class);Bundle bundle = new Bundle();bundle.putBinder(\"binder\",stub.asBinder());intent.putExtra(\"data\",bundle);startActivity(intent); ActivityTwo 1234IBinder binder = getIntent().getExtras().getBinder(\"binder\");IView2Result iView2Result = IView2Result.Stub.asInterface(binder);iView2Result.onResult(\"data\"); IView2Result.aidl 1234interface IView2Result &#123; void onResult(String data);&#125; æ²¡é”™ï¼Œè¿™æ ·å®ç°çš„å›è°ƒä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œç›¸å¯¹ä¹‹å‰æ—¶é—´æ€»çº¿çš„æ¥è¯´ï¼Œè¿™æ ·çš„æ“ä½œå¯¹è·¨è¿›ç¨‹çš„æ”¯æŒä¼šæ›´ä¼˜ã€‚ åèµ·ä¹‹ç§€ï¼šMessengerMessengerï¼šä½œä¸ºä¸€ä¸ªä¸é‚£ä¹ˆå¸¸è§çš„IPCé€šä¿¡æ–¹å¼æ¥è¯´ï¼Œæœ‰ç€ä»¥ä¸‹çš„ä¼˜ç‚¹ ä¸éœ€è¦é‡å¤çš„å®šä¹‰Aidl åªéœ€è¦ä½¿ç”¨handleræ¥æ“ä½œï¼Œå¤§å¤§çš„ç®€åŒ–äº†ipcçš„é€šä¿¡æµç¨‹ å…¶é€šä¿¡æ¨¡å‹å¦‚ä¸‹ï¼š 1234567891011121314+---------------+ +---------------+ +---------------+| | | | | || | | | | Process2 || Process1 | | | | + || + +------&gt;+ +-----&gt;+ | || | | | | | | || | | | Messenger | | | || | | | | | | || v | | | | | || +-----+-----+ | | | | v || | Handler | &lt;-------+ +&lt;-----+ +-----+------ +| +-----------+ | | | | | Handler | || | | | | +------------ |+---------------+ +---------------+ +---------------+ åŒæ ·çš„ï¼Œå®ƒä¹Ÿå¸¦æ¥äº†ä¸€äº›æ˜¾è€Œæ˜“è§çš„å¼Šç«¯ï¼š éœ€è¦å®šä¹‰å¤§é‡çš„handlemessageæ“ä½œ ä¸æ”¯æŒè¿œç¨‹é€šä¿¡çš„callback å½“ç„¶ï¼Œè¿™äº›å¼Šç«¯æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µæ¥è§„é¿ï¼Œä¾‹å¦‚å°è£…ä¸€äº›é¢„ç½®çš„ï¼Œé€šç”¨çš„æ“ä½œæ¥å¯¹å¤–ç®€åŒ–Apiï¼Œå¯æ˜¯å¯¹äºåˆ†ç¦»è¿›ç¨‹å¸¸å¸¸éœ€è¦çš„callbackæ“ä½œï¼Œå´æ˜¾å¾—æœ‰äº›åŠ›ä¸ä»å¿ƒäº†ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ›´ä¼˜åŒ–çš„æ–¹æ¡ˆå‘¢ï¼Ÿ æ›´ç§€çš„æ“ä½œï¼šContentProviderContentProdiverä½œä¸ºAndroidä¸­åŸç”Ÿçš„ç»„ä»¶æ”¯æŒï¼Œå¸¸å¸¸ä»¥ä¸€ä¸ªå†…å®¹æä¾›è€…å‡ºç°ã€‚ç”¨æ¥å°è£…ä¸€äº›éœ€è¦è·¨è¿›ç¨‹å…±äº«çš„æ•°æ®æ¥è¯´å·²ç»è¶³ä»¥æ”¯æŒå¤æ‚çš„åœºæ™¯äº†ã€‚ä¸è¿‡ï¼Œä½œä¸ºä¸€ä¸ªproviderï¼Œå®ƒä¹Ÿå¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ã€‚å¦‚æ–‡ç« ä¸€å¼€å§‹çš„æè¿°ï¼Œå‚ä¸è·¨è¿›ç¨‹é€šä¿¡çš„ï¼Œæ˜¯Binderå’ŒParcelï¼Œè€Œéç»„ä»¶ã€‚è€Œä»»ä½•å¯ä»¥å‚ä¸Bundleæ•°æ®äº¤æ¢çš„åœ°æ–¹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨Binderè¿›è¡Œé€šä¿¡ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå‡ºç°äº†å¾ˆå¤šåŸºäºContentProviderçš„è¿œç¨‹é€šä¿¡æ–¹æ¡ˆï¼š å¸¸è§çš„å§¿åŠ¿æ˜¯è¿™æ ·çš„ 12345678910111213141516171819202122+--------------------+ +----------------------+| | | || | | || Process1 | | Process2 || | | |+---+-------^--------+ +------+------^--------+ | | | | | | | | | | | | | | | | | | | | | | | |+------------------------------------------------+| +-----------+ +-----------+ || | AIDL1 +--------------&gt;+ AIDL2 | || | | | | || +-----------+&lt;--------------+-----------+ || || || ContentProvider || |+------------------------------------------------+ Process1 å’Œ Process2 ä¹‹é—´ä½¿ç”¨äº†ContentProviderè¿›è¡Œè¿œç¨‹çš„è°ƒç”¨ï¼Œä»–ä»¬ä¹‹é—´é€šå¸¸åœ¨Providerè¿›ç¨‹å†…è¿˜æœ‰ä¸€ä¸ªç¼“å­˜æ¥å­˜æ”¾å„ä¸ªè¿›ç¨‹å¯¹åº”çš„æœåŠ¡ï¼Œç­‰éœ€è¦è°ƒç”¨çš„è¿›ç¨‹å‘èµ·è°ƒç”¨çš„æ—¶ï¼Œåœ¨ProvideræŸ¥è¯¢æ­¤æœåŠ¡ï¼Œç„¶åè¿”å›å¯¹åº”çš„Binderæ¥å®ç°é€šä¿¡ã€‚ å…¶é¢ä¸´çš„å¼Šç«¯ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œé‚£å°±æ˜¯éœ€è¦åå¤çš„å®šä¹‰å„ç§AidlæœåŠ¡ ä»¥ä¸Šå°±æ˜¯ç›®å‰é˜¶æ®µæˆ‘æ€»ç»“çš„ä¸€äº›åŸºäºBinderçš„è¿œç¨‹é€šä¿¡æ–¹æ¡ˆã€‚ç°é˜¶æ®µçš„è¿œç¨‹é€šä¿¡æ–¹æ¡ˆï¼Œæˆ–å¤šæˆ–å°‘çš„éƒ½é¢ä¸´ç€ä¸€äº›é—®é¢˜ã€‚è¿™äº›é—®é¢˜è™½ç„¶å¯ä»¥é€šè¿‡å¤§é‡çš„ç¼–ç è§£å†³ï¼Œä½†å¾€å¾€å‚¬ç”Ÿä¸€ä¸ªæ–°æŠ€æœ¯å‘å±•çš„æ˜¯æ¶ˆé™¤é‡å¤çš„åŠ³åŠ¨ã€‚æ‰€ä»¥ï¼Œåœ¨å¤šè¿›ç¨‹ä¸IPCçš„æ©æ€¨æƒ…ä»‡ç¬¬äºŒç¯‡ä¸­ï¼Œä»¥ä¸Šçš„è¿™äº›é—®é¢˜éƒ½å°†ä¸€ä¸€è§£å†³ï¼ŒåŒæ—¶å°è£…ä¸€ä¸ªå¼ºå¤§çš„ï¼Œæ˜“äºç»´æŠ¤çš„è¿œç¨‹é€šä¿¡æ–¹æ¡ˆï¼","categories":[{"name":"android","slug":"android","permalink":"https://zyw.io/categories/android/"}],"tags":[{"name":"android","slug":"android","permalink":"https://zyw.io/tags/android/"},{"name":"IPC","slug":"IPC","permalink":"https://zyw.io/tags/IPC/"},{"name":"Binder","slug":"Binder","permalink":"https://zyw.io/tags/Binder/"}]},{"title":"è®°å½•ä¸‹Pythonéƒ¨ç½²çš„å‘ç‚¹ï¼ˆ1ï¼‰","slug":"è®°å½•ä¸‹Pythonéƒ¨ç½²çš„å‘ç‚¹ï¼ˆ1ï¼‰","date":"2020-02-25T14:51:09.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2020/02/25/è®°å½•ä¸‹Pythonéƒ¨ç½²çš„å‘ç‚¹ï¼ˆ1ï¼‰/","link":"","permalink":"https://zyw.io/2020/02/25/%E8%AE%B0%E5%BD%95%E4%B8%8BPython%E9%83%A8%E7%BD%B2%E7%9A%84%E5%9D%91%E7%82%B9%EF%BC%881%EF%BC%89/","excerpt":"","text":"é¢˜è®° ä¸Šå›è¯´åˆ°ï¼Œdjangoä½œä¸ºæˆ‘ä»¬çš„åå°æ¡†æ¶ï¼Œæ‰¿è½½ç€æ•´ä½“çš„ä¸šåŠ¡åŠŸèƒ½ã€‚é€šè¿‡å…¶å®Œå–„ &amp; å¼ºå¤§çš„åå°æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å¾—åˆ°æƒ³è¦çš„ä¸€ç³»åˆ—ï¼Œä¸è¿‡ä½œä¸ºä¸€ä¸ªæ–°æ‰‹ï¼Œé‡åˆ°å‘ä¹Ÿæ˜¯éš¾å…çš„ï¼Œæœ¬æ–‡è®°å½•èŒæ–°é‡åˆ°çš„å¸¸è§é—®é¢˜ å‘ç‚¹ä¸€ æ•°æ®åº“æŒ‡ä»¤é—®é¢˜ ç¬¬ä¸€ä¸ªå‘ç‚¹ï¼šé€šè¿‡ç®¡ç†å·¥å…·åˆ›å»ºçš„æ•°æ®åº“æŒ‡ä»¤ï¼Œå¯¹äºPKé”®ä¸ä¼šç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ’å…¥çš„è‡ªå¢ä¸»é”®æ˜¯ä¸ä¼šæœ‰è¿™ä¸ªå±æ€§çš„ï¼Œéœ€è¦åˆ°mysqlåå°ä¿®æ”¹ã€‚ å‘ç‚¹äºŒ Debugå¼€å…³é—®é¢˜ éƒ¨ç½²åˆ°æ­£å¼ç¯å¢ƒä¸€å®šè¦å…³é—­DEBUGï¼Œä¸€å®šè¦å…³é—­ï¼Œè™½ç„¶å®˜æ–¹å¥½å¿ƒçš„æç¤ºäº†ä¼šé€ æˆå†…å­˜æ³„éœ²é—®é¢˜,å¯æ˜¯æ–°æ‰‹å°å°ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜è€Œè«åå…¶å¦™çš„è¢«killæ‰celeryçš„workerã€‚ æ˜¨å¤©è·‘äº†ä¸€ä¸ªç¦»çº¿ä»»åŠ¡å‘ç°celeryåœ¨djangoç¯å¢ƒä¸‹ï¼Œè·‘æ—¶é—´è¾ƒé•¿çš„ä»»åŠ¡ä¼šå‡ºç°å†…å­˜ä¸è¶³è¢«ç³»ç»Ÿkillæ‰çš„é—®é¢˜ï¼Œè¿™ä¸ªç‚¹ä¸€å®šè¦è®°ç‰¢ã€‚ å‘ç‚¹ä¸‰ é™æ€æ–‡ä»¶æ”¯æŒ:debugç¯å¢ƒçš„è¯ï¼Œdjangoä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬éƒ¨ç½²é™æ€æ–‡ä»¶ï¼Œæƒ³æ€ä¹ˆç©å°±æ€ä¹ˆç©ï¼Œå¯æ˜¯åˆ°äº†æ­£å¼ç¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦åœ¨HttpServiceä¸Šé…ç½®å¥½é™æ€çš„è§„åˆ™ï¼ŒåŒæ—¶åœ¨Setting.pyä¸­æŒ‡å®šé™æ€ç›®å½•ï¼š Setting.py 1234567891011STATIC_URL = '/static/'MEDIA_IMAGE_DIR_PREFIX = \"img\"STATICFILES_DIRS = ( os.path.join('static'), )MEDIA_OUTPUT = os.path.join('static',\"output\")LX_OUTPUT = os.path.join('static',\"lx\")ALLOW_EXT = [\".mp4\",\".flv\",\".avi\"] Nginx Config 1234location /static/ &#123; alias /home/www/wwwroot/ffdjango/static/; &#125; PSï¼šè®°å¾—æ‰§è¡Œ collectstatic æ¥æ”¶é›†ä¸‹é™æ€æ–‡ä»¶ï¼ï¼ å‘ç‚¹å›› Celery é—®é¢˜ï¼šä½¿ç”¨ supervisord éƒ¨ç½²CeleryæœåŠ¡çš„æ—¶å€™ï¼Œä¸€å®šè®°å¾—å…ˆkillæ‰ä¹‹å‰çš„è¿›ç¨‹ï¼Œå¦åˆ™ä½ ä¼šçœ‹åˆ°ä¸€ç‰‡å¯†å¯†éº»éº»çš„CeleryWorker æ”¾ä¸Šæˆ‘çš„å¯åŠ¨è„šæœ¬ï¼š celery.sh 1234#!/bin/bashsudo pkill -9 -f 'celery'source $1/bin/activatecelery -A ffdjango worker -l info --concurrency=2 ä»¥ä¸Šå°±æ˜¯è¶Ÿè¿‡çš„å‘ï¼Œå…ˆè®°å½•ä¸‹ï¼Œä¾›åæœŸæŸ¥é˜…","categories":[{"name":"python","slug":"python","permalink":"https://zyw.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://zyw.io/tags/python/"},{"name":"django","slug":"django","permalink":"https://zyw.io/tags/django/"},{"name":"celery","slug":"celery","permalink":"https://zyw.io/tags/celery/"}]},{"title":"ä»2å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -ä¸€å¼ â€å‡â€œå›¾ç‰‡","slug":"ä»2å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -ä¸€å¼ â€å‡â€œå›¾ç‰‡","date":"2020-02-23T15:36:31.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2020/02/23/ä»2å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -ä¸€å¼ â€å‡â€œå›¾ç‰‡/","link":"","permalink":"https://zyw.io/2020/02/23/%E4%BB%8E2%E5%BC%80%E5%A7%8B%E6%89%93%E9%80%A0%E7%9A%84%E4%BA%91%E8%BD%AC%E7%A0%81-%E4%B8%80%E5%BC%A0%E2%80%9D%E5%81%87%E2%80%9C%E5%9B%BE%E7%89%87/","excerpt":"","text":"é¢˜è®°ä¹¦æ¥ä¸Šå›ï¼Œæˆ‘ä»¬æåˆ°äº†è‡ªåŠ¨ä¸‹è½½ffmpegå¹¶ä¸”è‡ªåŠ¨é…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œffmpegçš„é—®é¢˜å¾—åˆ°äº†å®Œç¾çš„è§£å†³ã€‚æ­¤æ—¶åˆæœ‰ä¸€ä¸ªé—®é¢˜æ¥äº†ï¼Œè§†é¢‘äº‘æ„å‘³ç€ã€çƒ§é’±ã€‘ï¼Œæµé‡ï¼Œcdnï¼Œå­˜å‚¨ï¼Œéƒ½æ˜¯å¤§å¤´ã€‚é‚£ä¹ˆå¦‚ä½•åšåˆ°å‡ ä¹0æˆæœ¬çš„å­˜å‚¨è§†é¢‘å‘¢ï¼Ÿ å›¾åºŠçš„å¦™ç”¨ç°åœ¨çš„äº’è”ç½‘ä¸Šï¼Œå„å¼å„æ ·çš„å›¾åºŠåº”æœ‰å°½æœ‰ã€‚å¤§éƒ¨åˆ†éƒ½æ˜¯å·²ç»è¿è¡Œäº†å¾ˆä¹…çš„å›¾åºŠï¼Œæ¯”å¦‚ è·¯è¿‡å›¾åºŠï¼Œsm.msç­‰ï¼Œå¦‚æœåˆ‡ç‰‡ä¹‹åçš„tsæ–‡ä»¶èƒ½å­˜åœ¨è¿™é‡Œï¼Œé‚£ä¹ˆè¯¥å¤šå¹¸ç¦å•Š.. å¹»æƒ³ç»ˆç©¶æ˜¯å¹»æƒ³ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•ç€å°†ä¸€ä¸ª.tsæ–‡ä»¶ä¸Šä¼ åˆ°ä¸Šè¿°çš„å›¾åºŠä¸Šçš„æ—¶å€™ï¼Œä»–ä¼šæç¤ºæˆ‘ä»¬ è·¯è¢«å µæ­»äº†å—ï¼Ÿå…¶å®å¹¶ä¸ç„¶ï¼Œç»è¿‡å°è¯•ï¼ŒæŠŠtsæ–‡ä»¶åˆå¹¶åˆ°å›¾ç‰‡ä¸­ï¼Œä¸ä¼šå½±å“åŸæœ‰çš„å›¾ç‰‡ï¼Œå¹¶ä¸”ï¼æˆ‘ä»¬å¯ä»¥æŠŠè¿™æ‰¹å›¾åºŠåˆ©ç”¨èµ·æ¥äº† æ¯”å¦‚è¿™å¼ å›¾ç‰‡ï¼š video-000000.jpg 100%[===========================&gt;] 8.20M 190KB/s in 39s ä¸€å¼ jpgå›¾ç‰‡å¤§å°8.2Mï¼ŒæˆåŠŸçš„å°†tsæ–‡ä»¶æ··å…¥å…¶ä¸­ï¼Œé‚£æˆ‘ä»¬å°è¯•ä¼ åˆ°å›¾åºŠä¸Šå‘¢ï¼Ÿ è¿™é‡Œæˆ‘æ’å…¥äº†ä¸€ä¸ªç»è¿‡ä¿®æ”¹çš„hls.jsçš„åº“ï¼Œå¯ä»¥æ”¯æŒç‰¹æ®Šçš„å›¾ç‰‡åˆ‡é¢tsæ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æ˜¯æµ‹è¯•ã€‚æ‰“å¼€æ§åˆ¶å°å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°è¿™äº›éƒ½æ˜¯ä¼ªè£…å¥½çš„å›¾ç‰‡ã€‚è€Œå…¶ä¸­çš„tséƒ¨åˆ†æ˜¯å¯ä»¥ç»è¿‡ä¿®æ”¹ç‰ˆçš„jsè§£æçš„ã€‚ åå°ä¸­æ·»åŠ ï¼š (function(){var player = new DPlayer({\"container\":document.getElementById(\"dplayer1\"),\"autoplay\":true,\"video\":{\"url\":\"https://api.mov.pw/media/cdn_media/10/8c7b0d745ac24cf096484ea6cc5f6491/index.m3u8\",\"type\":\"hls\"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()","categories":[{"name":"python","slug":"python","permalink":"https://zyw.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://zyw.io/tags/python/"},{"name":"ffmpeg","slug":"ffmpeg","permalink":"https://zyw.io/tags/ffmpeg/"},{"name":"å›¾åºŠ","slug":"å›¾åºŠ","permalink":"https://zyw.io/tags/%E5%9B%BE%E5%BA%8A/"}]},{"title":"ä»1å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -Ffmpegçš„é—®é¢˜","slug":"ä»1å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -Ffmpegçš„é—®é¢˜","date":"2020-02-23T15:23:40.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2020/02/23/ä»1å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -Ffmpegçš„é—®é¢˜/","link":"","permalink":"https://zyw.io/2020/02/23/%E4%BB%8E1%E5%BC%80%E5%A7%8B%E6%89%93%E9%80%A0%E7%9A%84%E4%BA%91%E8%BD%AC%E7%A0%81-Ffmpeg%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"","text":"é¢˜è®° ç”±ä¸Šä¸€ç¯‡ä¸­çš„ä¸€ä¸ªéœ€æ±‚ï¼ˆffmpegå®‰è£…çš„é—®é¢˜ï¼‰ï¼Œç®€å•æ€è€ƒäº†ä¸‹å¦‚ä½•åœ¨ä¸å®‰è£…çš„æƒ…å†µä¸‹ä½¿ç”¨ffmpegå‘¢ï¼Ÿ ffmpegä»å“ªæ¥ï¼Ÿffmpegä¸å¤šä»‹ç»ï¼Œå¼ºå¤§çš„åŠŸèƒ½æ˜¯ä»–èƒ½ä½¿ç”¨çš„å¦‚æ­¤å¹¿æ³›çš„åŸå› ä¹‹ä¸€ã€‚ä¸è¿‡å› ä¸ºå…¨éƒ¨å¸‚é¢ä¸Šå¯è§çš„æ“ä½œç³»ç»Ÿéƒ½ä¸ä¼šå†…ç½®ï¼Œéœ€è¦é¢å¤–çš„å®‰è£…æ“ä½œï¼Œè¿™å¯¹äºæ‡’ä¸€äº›çš„ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯æ¥å—çš„ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠï¼Ÿ 1 è„šæœ¬ä¸­å¢åŠ ã€è‡ªåŠ¨ã€‘å®‰è£…çš„æµç¨‹? å¯¹äºä¸€ä¸ªè§‰å¾—shellæ˜¯åäººç±»çš„developeræ¥è¯´ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ 2 ä¸‹è½½é¢„ç¼–è¯‘çš„ffmpeg æ— è®ºå¯¹developerè¿˜æ˜¯å¯¹useræ¥è¯´ï¼Œæ²¡æœ‰ã€ç¼–è¯‘æµç¨‹ã€‘æˆ–è€…å«åšã€æ€¥é€Ÿå®‰è£…ã€‘çš„åŠŸèƒ½éƒ½æ˜¯æ¯”è¾ƒä¼˜åŒ–çš„ï¼ˆè™½ç„¶æœ‰äººè¯´åœ¨è‡ªå·±çš„å¹³å°ä¸Šå®šåˆ¶ä¼šâ€æ€§èƒ½æ›´å¥½â€œï¼‰ã€‚æ—¢ç„¶æˆ‘ä»¬å·²ç»ç”¨å…¨æ ˆçš„pythonäº†ï¼Œä½•ä¸å¯åŠ¨çš„æ—¶å€™é€šè¿‡pythonè‡ªåŠ¨çš„é…ç½®å¥½ffmpegçš„ç¯å¢ƒå‘¢ï¼Ÿ æ–¹æ¡ˆè½åœ°é¢„ç¼–è¯‘çš„ffmpegæ¥æºæœ‰å¦‚ä¸‹å‡ ä¸ª 12345windows: https://ffmpeg.zeranoe.com/builds/win64/static/linux:https://johnvansickle.com/ffmpeg/releases/osx:https://evermeet.cx/ffmpeg/ GitlabCI + Gitlab Page çš„å¦™ç”¨gitlabæ˜¯ä¸€å®¶è‰¯å¿ƒçš„gitæœåŠ¡æä¾›å•†ï¼ˆåŒ…æ‹¬æˆ‘çš„åšå®¢ä¹Ÿè½åœ¨ä¸Šé¢ï¼‰ï¼Œå…¶æä¾›äº†ä¸€å¥—å¼ºå¤§çš„CIæœåŠ¡ï¼Œå¯ä»¥åœ¨æäº¤çš„æ—¶å€™è‡ªåŠ¨ç¼–è¯‘ã€å‘å¸ƒä¸€äº›äº§ç‰©ã€‚å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªé™æ€å‘å¸ƒçš„åšå®¢ demoå€ŸåŠ©å…¶é¡µé¢å‘å¸ƒåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªåŠ¨æ›´æ–°ffmpegçš„æœ€æ–°ç‰ˆæœ¬ï¼Œå‘å¸ƒåˆ°gitlab pageä¸Š è¿™æ˜¯æˆ‘åˆ©ç”¨gitlabCIåˆ¶ä½œçš„å…¨å¥—ffmpegäºŒè¿›åˆ¶æ–‡ä»¶ FFmpeg è¿™æ˜¯å‘å¸ƒæ‰€éœ€çš„ciè§„åˆ™ï¼Œå…¶ä¸­ download.sh ç”¨äºä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶å¹¶è§£å‹ï¼Œmakeindex.sh ç”¨äºåˆ¶ä½œä¸€ä¸ªç®€å•ï¼ˆæ¼ï¼‰çš„é¦–é¡µã€‚ 1234567891011121314151617181920212223242526before_script: - apt-get update -y - apt-get install curl -y - apt-get install p7zip-full -y - chmod a+x download.sh - chmod a+x makeindex.sh - PATH=$PATH:. - mkdir public - mkdir public/win32-x64 - mkdir public/win32-ia32 - mkdir public/linux-x64 - mkdir public/linux-ia32 - mkdir public/linux-arm - mkdir public/linux-arm64 - mkdir public/darwin-x64 pages: stage: deploy script: - sh download.sh - sh makeindex.sh public artifacts: paths: - public only: - master pythonè‡ªåŠ¨ä¸‹è½½çš„æµç¨‹åˆ©ç”¨requestä¸‹è½½ï¼Œç„¶åé…ç½®åˆ°ç¯å¢ƒä¸­å°±å¯ä»¥äº†ï¼Œå¤§æ¦‚çš„æµç¨‹å¦‚ä¸‹ï¼š 12345def download_ffmpeg() download_url = \"http://ffmpeg.down.asia/&#123;os_platform&#125;-&#123;arch&#125;/&#123;file&#125;\".format(os_platform=os_platform, arch=arch, file=target_file) r = requests.get(download_url, stream=True) ... downloadâ€¦ 123456789def setup(): ffprob_path = get_ffprobe_path() target_ff_path = os.path.join(os.path.dirname(sys.executable), \"ffmpeg\") target_fp_path = os.path.join(os.path.dirname(sys.executable), \"ffprobe\") if not os.path.exists(target_ff_path): os.symlink(ffmpeg_path, target_ff_path) if not os.path.exists(target_fp_path): os.symlink(ffprob_path, target_fp_path) è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬åªè¦åœ¨åˆé€‚çš„æ—¶æœºæ‰§è¡Œä¸‹è¿™ä¸ªè„šæœ¬å°±å¯ä»¥äº†~","categories":[{"name":"python","slug":"python","permalink":"https://zyw.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://zyw.io/tags/python/"},{"name":"ffmpeg","slug":"ffmpeg","permalink":"https://zyw.io/tags/ffmpeg/"}]},{"title":"ä»0å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -å¼€ç¯‡","slug":"ä»0å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -å¼€ç¯‡","date":"2020-02-23T07:14:35.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2020/02/23/ä»0å¼€å§‹æ‰“é€ çš„äº‘è½¬ç -å¼€ç¯‡/","link":"","permalink":"https://zyw.io/2020/02/23/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E6%89%93%E9%80%A0%E7%9A%84%E4%BA%91%E8%BD%AC%E7%A0%81-%E5%BC%80%E7%AF%87/","excerpt":"","text":"é¢˜è®° ä¸çŸ¥ä¸è§‰ä¸­ï¼Œé©¬ä¸Šå°±è¦æ­¥å…¥30å²çš„å¤§å…³äº†ï¼Œæ–°å¹´ç«‹ä¸‹çš„Flagä¹‹ä¸€å°±æ˜¯åšæŒå†™åšå®¢ï¼Œé‚£ä¹ˆå°±å¼€å§‹å§â€¦ æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼Ÿ æ€è€ƒä¸€ä¸ªäº§å“å…¶ç›®æ ‡ï¼Œå½“ç„¶æœ€ç»ˆçš„ç›®çš„å°±æ˜¯ç»™ç”¨æˆ·ï¼ˆå½“ç„¶å¯ä»¥ä½¿è‡ªå·±ï¼‰ï¼Œç”¨ç€èˆ’æœï¼Œç”¨çš„çœå¿ƒï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæ“ä½œç®€å•ï¼Œä»¥æˆ‘è‡ªå·±ä½œä¸ºä¸€ä¸ªæœ€ç»ˆçš„ç”¨æˆ·è€ƒé‡çš„è¯ï¼Œé‚£ä¹ˆâ€¦ åŸºæœ¬çš„ç¼–è§£ç åŠŸèƒ½è¦æœ‰ï¼Œåˆ‡ç‰‡è¦æœ‰ï¼Œæˆªå°é¢å›¾ï¼ˆæ”¯æŒgifï¼‰è¦æœ‰ï¼Œå¼ºå¤§çš„åŒæ­¥åŠŸèƒ½ è¦èƒ½ç¦»çº¿ä¸‹è½½ï¼Œè¿™æ ·æˆ‘éƒ¨ç½²å®Œäº†ä¹‹åå°±å¯ä»¥æŒ‚æœºç­‰ç€äº† è¦èƒ½æ¨æµï¼Œæˆ‘æƒ³åšä¸ªç”µå°ç›´æ’­é—´ ä¸€å®šè¦éƒ¨ç½²èµ·æ¥ç®€å•ï¼Œæœ€å¥½è·Ÿå½“åˆçš„php without composer çš„ä¸€æ ·ä¸€æ ·çš„. å¯é æ€§å¼ºå¤§ æ‰©å±•æ€§å¼ºï¼Œæœ€å¥½èƒ½è‡ªå·±å†™æ’ä»¶ ä»»åŠ¡ç®¡ç†ä¸è¦å¤ªè´¹åŠ² . . . . åŸºäºä»¥ä¸Šå‡ ç‚¹ï¼Œé€‰æ‹©æŠ€æœ¯æ ˆ è½¬ç ï¼Œåˆ‡ç‰‡ï¼Œå¤šåª’ä½“æ“ä½œ -&gt; Ffmpeg å¿«é€Ÿæåå° Django Ffmpeg ä¸éœ€è¦æ‰‹åŠ¨å®‰è£… Celeryä½œä¸ºå¼ºæœ‰åŠ›çš„å¼‚æ­¥ä»»åŠ¡æ”¯æ’‘ï¼Œå·²ç»æ”¶åˆ°äº†å¹¿å¤§çš„å•†å“åŒ–çš„éªŒè¯ ç¦»çº¿ä¸‹è½½çš„è¯ï¼Œyou-get æå®šä¸€åˆ‡ å½“æˆ‘å†™å®Œè¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå…¶å®åŠŸèƒ½å·²ç»å·®ä¸å¤šäº† ğŸ˜ åŸºæœ¬çš„é›å½¢å®Œæˆ æ’å…¥ä¸€ä¸ªè§†é¢‘è¯•è¯• (function(){var player = new DPlayer({\"container\":document.getElementById(\"dplayer0\"),\"autoplay\":true,\"theme\":\"#FADFA3\",\"video\":{\"url\":\"https://api.mov.pw/media/hls_media/9/index.m3u8\",\"type\":\"hls\"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()","categories":[{"name":"python","slug":"python","permalink":"https://zyw.io/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://zyw.io/tags/python/"},{"name":"django","slug":"django","permalink":"https://zyw.io/tags/django/"},{"name":"ffmpeg","slug":"ffmpeg","permalink":"https://zyw.io/tags/ffmpeg/"},{"name":"è½¬ç ","slug":"è½¬ç ","permalink":"https://zyw.io/tags/%E8%BD%AC%E7%A0%81/"}]},{"title":"A simple way to block Android 's fast click event","slug":"A simple Way to Avoid Fast-Double-Click","date":"2020-02-23T06:38:04.000Z","updated":"2021-01-12T13:20:50.452Z","comments":true,"path":"2020/02/23/A simple Way to Avoid Fast-Double-Click/","link":"","permalink":"https://zyw.io/2020/02/23/A%20simple%20Way%20to%20Avoid%20Fast-Double-Click/","excerpt":"","text":"Fast-Click is Always a trouble in Android development.such as a button clicklistener implements in order jumping to another Activity.It will seem like follow: 12345678910111213public class MainActivity extends AppCompatActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); findViewById(R.id.btn_test).setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View view) &#123; startActivity(new Intent(MainActivity.this,MainActivity.class)); &#125; &#125;); &#125;&#125; But if you clicking fast in a tiny duration , It will open two target Activity. A simple way to avoid this issue is set the target launchMode to single top or single instance. like this : 12345678&lt;activity android:name=\"debug.MainActivity\" android:launchMode=\"singleInstance\"&gt; &lt;intent-filter&gt; &lt;action android:name=\"android.intent.action.MAIN\"/&gt; &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt; &lt;/intent-filter&gt; &lt;/activity&gt; But , if there is a great count of Activity in your Manifest ,it will be a â€˜treasureâ€™:smile other simple way is add pre time check on click listener. like this: 1234567891011121314151617public class MainActivity extends AppCompatActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); findViewById(R.id.btn_test).setOnClickListener(new View.OnClickListener() &#123; private long lastClickTime = 0; @Override public void onClick(View view) &#123; if(System.currentTimeMillis() - lastClickTime &gt; 1000)&#123; startActivity(new Intent(MainActivity.this,MainActivity.class)); &#125; lastClickTime = SystemClock.currentThreadTimeMillis(); &#125; &#125;); &#125;&#125; If your has a lot of OnClickListener it will be your disaster.Here is a solution to resove the fast-double-click problems. The SolutionAll we know ,the View use TouchEvent to perform onClick Event, if the event can be hook or intercept in all view, the trouble can be done. I found a hook-point seem to be very fitted to do this.In Viewâ€™s class members , here is a Field named mAttachInfo. provided Viewâ€™s post() method implements. If you interest in read the fucking source , you can simply know the viewâ€™s touch event will post a Runnable to Perform ClickEvent. the Runnable named android.view.View.PerformClick here is the implement code : 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151package com.yixia.utils;import android.app.Activity;import android.os.Handler;import android.os.Message;import android.util.Log;import android.view.View;import java.lang.reflect.Field;import java.util.HashMap;/** * @author yixia zhangyanwei@yixia.com * @version version_code * @Copyright (c) 2017 miaopai * @Description * @date 2017/10/11 */public class DBClickBlocker extends Handler &#123; private static final String TAG = \"DBClickBlocker\"; private static final long DOUBLE_CLICK_TIME = 2000; private HashMap&lt;Runnable, Long&gt; mClickTimes = new HashMap&lt;&gt;(); private Handler mOrigHandler = null; static &#123; try &#123; ATTACH_INFO_FIELD = View.class.getDeclaredField(\"mAttachInfo\"); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; private static Field ATTACH_INFO_FIELD; public static void apply(Activity activity) &#123; try &#123; View decorView = activity.getWindow().getDecorView(); if (ATTACH_INFO_FIELD == null) &#123; Log.e(TAG, \"un support device\"); return; &#125; ATTACH_INFO_FIELD.setAccessible(true); Object attachInfo = ATTACH_INFO_FIELD.get(decorView); if (attachInfo == null &amp;&amp; decorView != null) &#123; decorView.addOnAttachStateChangeListener(new View.OnAttachStateChangeListener() &#123; @Override public void onViewAttachedToWindow(View v) &#123; try &#123; Object _attachInfo = ATTACH_INFO_FIELD.get(v); applyInner(_attachInfo); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; @Override public void onViewDetachedFromWindow(View v) &#123; Log.e(TAG, \"remove callback success\"); v.removeOnAttachStateChangeListener(this); &#125; &#125;); &#125; else if (attachInfo != null &amp;&amp; decorView != null) &#123; applyInner(attachInfo); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; public static void apply(View view) &#123; try &#123; if (ATTACH_INFO_FIELD == null) &#123; Log.e(TAG, \"un support device\"); return; &#125; ATTACH_INFO_FIELD.setAccessible(true); Object attachInfo = ATTACH_INFO_FIELD.get(view); if (attachInfo == null &amp;&amp; view != null) &#123; view.addOnAttachStateChangeListener(new View.OnAttachStateChangeListener() &#123; @Override public void onViewAttachedToWindow(View v) &#123; try &#123; Object _attachInfo = ATTACH_INFO_FIELD.get(v); applyInner(_attachInfo); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; @Override public void onViewDetachedFromWindow(View v) &#123; Log.e(TAG, \"remove callback success\"); v.removeOnAttachStateChangeListener(this); &#125; &#125;); &#125; else if (attachInfo != null &amp;&amp; view != null) &#123; applyInner(attachInfo); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; private static void applyInner(Object attachInfo) throws Exception &#123; if (attachInfo != null) &#123; Field mHandler = attachInfo.getClass().getDeclaredField(\"mHandler\"); mHandler.setAccessible(true); Handler mAttachInfoHandler = (Handler) mHandler.get(attachInfo); mHandler.set(attachInfo, new DBClickBlocker(mAttachInfoHandler)); Log.e(TAG, \"install double blocker success !\"); &#125; &#125; public DBClickBlocker(Handler mOrigHandler) &#123; this.mOrigHandler = mOrigHandler; &#125; @Override public void dispatchMessage(Message msg) &#123; mOrigHandler.dispatchMessage(msg); &#125; @Override public String getMessageName(Message message) &#123; return mOrigHandler.getMessageName(message); &#125; @Override public boolean sendMessageAtTime(Message msg, long uptimeMillis) &#123; if (msg.getCallback() != null &amp;&amp; \"android.view.View.PerformClick\".equals( msg.getCallback().getClass().getCanonicalName())) &#123; long currentTime = System.currentTimeMillis(); if (mClickTimes.containsKey(msg.getCallback())) &#123; if (currentTime - mClickTimes.get(msg.getCallback()) &gt; DOUBLE_CLICK_TIME) &#123; //è¶…è¿‡åŒå‡»æ—¶é—´ï¼Œå¯ä»¥åŒå‡» Log.e(TAG,\"block over time...\"); mClickTimes.put(msg.getCallback(), currentTime); return mOrigHandler.sendMessageAtTime(msg, uptimeMillis); &#125; else &#123; Log.e(TAG,\"block over success...\"); return true; &#125; &#125; else &#123; Log.e(TAG,\"block over new...\"); mClickTimes.put(msg.getCallback(), currentTime); return mOrigHandler.sendMessageAtTime(msg, uptimeMillis); &#125; &#125; return mOrigHandler.sendMessageAtTime(msg, uptimeMillis); &#125; @Override public String toString() &#123; return mOrigHandler.toString(); &#125; @Override public void handleMessage(Message msg) &#123; mOrigHandler.handleMessage(msg); &#125;&#125; Update: simple way to import dependencies dependencies { compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;]) compile &apos;com.android.support:appcompat-v7:24.2.0&apos; compile &apos;io.zyw.os:fastclickblocker:1.1&apos; } Usage: DBClickBlocker.apply(Activty or View); all is done.~ Sample","categories":[{"name":"android","slug":"android","permalink":"https://zyw.io/categories/android/"}],"tags":[]},{"title":"ä¸‹ä¸€ä»£ç§’æ‹ç»„ä»¶åŒ–æ„æ€","slug":"ä¸‹ä¸€ä»£ç§’æ‹ç»„ä»¶åŒ–æ„æ€","date":"2018-10-31T08:47:56.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2018/10/31/ä¸‹ä¸€ä»£ç§’æ‹ç»„ä»¶åŒ–æ„æ€/","link":"","permalink":"https://zyw.io/2018/10/31/%E4%B8%8B%E4%B8%80%E4%BB%A3%E7%A7%92%E6%8B%8D%E7%BB%84%E4%BB%B6%E5%8C%96%E6%9E%84%E6%80%9D/","excerpt":"","text":"ç›®å‰é˜¶æ®µçš„ç§’æ‹å·¥ç¨‹å·²ç»æœ‰äº†ä¸€å¥—æˆç†Ÿçš„ç»„ä»¶åŒ–ä½“ç³»ï¼Œä¸è¿‡ä»ç„¶å¾ˆå¤šé—®é¢˜ç­‰å¾…è§£å†³ã€‚ 1.ç»„ä»¶åŒ–å®Œå…¨ä¾èµ–äºå·¥ç¨‹çš„ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œå¯¼è‡´æ²¡æœ‰ä¸€å®šç»éªŒçš„å¼€å‘äººå‘˜ä¸èƒ½åˆç†çš„æŠŠæ§å¥½å¼€é—­åŸåˆ™ã€‚ 2.å½“æ—¶æå‡ºçš„æ„æƒ³ï¼ˆç»„å»ºä¸€é”®åˆ‡æ¢ä¸ºæ’ä»¶ï¼‰ä»ç„¶æ²¡æœ‰å®ç° 3.ç¹ççš„é…ç½®ä¼šå®¹æ˜“å‡ºé”™ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæ‰€ä»¥å°†æå‡ºä¸‹ä¸€ä»£ç»„ä»¶åŒ–çš„æ¡†æ¶ã€‚ 1.åŸºæœ¬æ€è·¯ ä¸»å·¥ç¨‹åˆ°åº•åº”è¯¥ä¾èµ–ä»€ä¹ˆï¼Ÿ ç°é˜¶æ®µçš„ä¸»å·¥ç¨‹ï¼Œéƒ½æ˜¯é€šè¿‡gradleçš„dependenceç›´æ¥compileå¼•å…¥gradleå·¥ç¨‹å†…éƒ¨çš„projectï¼Œå¦‚æœå¯ä»¥æ›´æ¢ä¸€ç§æ–¹å¼ï¼Œæ¯”å¦‚é€šè¿‡ â€œcompileè¿œç¨‹ä¾èµ–â€,æ¥å¼•å…¥å…¶ä»–å·¥ç¨‹ï¼Œå†…éƒ¨çš„moduleä¹Ÿéƒ½åŠ ä¸Šç‰ˆæœ¬æ§åˆ¶ï¼Œè¿™æ ·ä¼šå¤§å¤§å¢åŠ å·¥ç¨‹çš„ç¨³å®šæ€§ã€‚ ä¸»å·¥ç¨‹é…ç½®å¦‚ä¸‹ 1234MpAppWrapperConfig &#123; localMavenDir = \"mpLocalMaven\" exclude['yxplayer']&#125; å…¶ä¸­ï¼ŒlocalMavenDir ï¼Œä¸ºæŒ‡å®šçš„ä¸€ä¸ªæœ¬åœ°mavenç›®å½•ã€‚é€šè¿‡æ­¤æ–¹æ³•ï¼Œæ„å»ºä¸€ä¸ªæœ¬åœ°çš„mavenã€‚ç„¶åå…¶ä»–å·¥ç¨‹publishåˆ°æ­¤mavenç›®å½•ä¸‹ï¼Œå¯ä»¥å¢åŠ ç¼–è¯‘çš„é€Ÿåº¦ã€‚ moduleæ€æ ·å®šä¹‰æœ€å¥½ï¼Ÿ ç°åœ¨æ§åˆ¶æ˜¯å¦ä¸ºå•ç‹¬ç¼–è¯‘æ¨¡å¼å­˜åœ¨ç€å¾ˆå¤§çš„éšæ‚£ï¼Œé…ç½®æ–‡ä»¶éƒ½æ˜¯é€šè¿‡æ˜æ˜¾çš„é…ç½®é¡¹åœ¨gradle.propertiesä¸­é…ç½®ã€‚å®Œå…¨å¯ä»¥é€šè¿‡gradle pluginçš„æ–¹å¼æ¥æ§åˆ¶è¿™äº›ä¸œè¥¿ module ä¸­çš„configå¦‚ä¸‹ 12345678MpCompConfig &#123; moduleName &#x3D; &quot;com.yixia.module.player&quot; debugDir &#x3D; [&#39;src&#x2F;debug&#x2F;java&#39;] debugResDir &#x3D; [&#39;src&#x2F;debug&#x2F;res&#39;] launcherActivity &#x3D; &quot;com.yixia.module.player.DebugActivity&quot; app &#x3D; &quot;com.yixia.module.player.PYApplication&quot; localMavenDir &#x3D; &quot;mpLocalMaven&quot;&#125; è¿™é‡Œçš„é…ç½®é¡¹æ¯”è¾ƒå¤šï¼Œä¾æ¬¡åˆ—ä¸¾ã€‚ moduleNameæŒ‡å®šç‹¬ç«‹ç¼–è¯‘æœŸé—´çš„åŒ…åã€‚ debugDirï¼Œç‹¬ç«‹APPæ¨¡å¼ä¸‹çš„ç›®å½•ï¼Œåœ¨Moduleä¼šå‰”é™¤è¿™é¡¹ã€‚ debugResDirï¼Œç‹¬ç«‹æ¨¡å¼ä¸‹çš„resç›®å½•ã€‚ launcherActivity ï¼Œç‹¬ç«‹æ¨¡å¼ä¸‹çš„ä¸»Debugç”¨Activityã€‚ app ,æ­¤å·¥ç¨‹çš„ç‹¬ç«‹appï¼Œå¦‚ç¼–è¯‘è¿›ä¸»å·¥ç¨‹ä¼šè‡ªåŠ¨æ‰“åŒ…è¿›å…¥applicationã€‚ localMavenDirè¾“å‡ºçš„mavenåœ°å€ã€‚","categories":[{"name":"android","slug":"android","permalink":"https://zyw.io/categories/android/"}],"tags":[{"name":"android","slug":"android","permalink":"https://zyw.io/tags/android/"},{"name":"AOP","slug":"AOP","permalink":"https://zyw.io/tags/AOP/"},{"name":"ç»„ä»¶åŒ–","slug":"ç»„ä»¶åŒ–","permalink":"https://zyw.io/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"},{"name":"tramsform","slug":"tramsform","permalink":"https://zyw.io/tags/tramsform/"},{"name":"gradle","slug":"gradle","permalink":"https://zyw.io/tags/gradle/"}]},{"title":"ç§’æ‹çš„ç»„ä»¶åŒ–æ¼”è¿›","slug":"ç§’æ‹çš„ç»„ä»¶åŒ–æ¼”è¿›","date":"2018-09-12T08:23:24.000Z","updated":"2021-01-12T13:20:50.456Z","comments":true,"path":"2018/09/12/ç§’æ‹çš„ç»„ä»¶åŒ–æ¼”è¿›/","link":"","permalink":"https://zyw.io/2018/09/12/%E7%A7%92%E6%8B%8D%E7%9A%84%E7%BB%84%E4%BB%B6%E5%8C%96%E6%BC%94%E8%BF%9B/","excerpt":"","text":"ç»„ä»¶åŒ–çš„åæ€ï¼šæœ€æ—©çš„ç»„ä»¶åŒ–æ¦‚å¿µåº”è¯¥æ˜¯ä»OSGIæ¨¡å‹æ¼”å˜è¿‡æ¥çš„ã€‚å½“æ—¶åœ¨JavaWebé¢†åŸŸï¼Œå¼€å‘è€…ä¸ºäº†å°†æœåŠ¡ç»†åˆ†ï¼Œå‡ºç°äº†é¢å‘æ¥å£ç¼–ç¨‹çš„æ€è·¯ã€‚è€Œç”±äºå·¥ç¨‹çš„åºå¤§å†åŠ ä¸Šå•çº¯çš„è§„èŒƒå·²ç»ä¸èƒ½ä¸¥æ ¼è¦æ±‚å¼€å‘äººå‘˜æŒ‰ç…§çº¦å®šçš„è§„èŒƒè¿›è¡Œ â€œæ¥å£â€ ç¼–ç¨‹äº†ã€‚ç»„ä»¶åŒ–ç”±æ­¤åº”è¿è€Œç”Ÿã€‚ ç»„ä»¶åŒ–çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³å‡ ä¸ªé—®é¢˜ï¼š åŠŸèƒ½æ‹†åˆ† è§£è€¦ ç»„å»ºå•ç‹¬ç¼–è¯‘ï¼Œä¸å½±å“æ•´ä¸ªå·¥ç¨‹ã€‚ Android å¹³å°çš„æ—©æœŸç»„ä»¶åŒ–æ€è·¯ åº•å±‚Frameworkä¸ºåŸºç¡€ä¸šåŠ¡ï¼Œæ‰€æœ‰å…¬å…±çš„åŠŸèƒ½åœ¨æ­¤ä½“ç°ã€‚ ä¸Šå±‚ç»„å»ºå•ç‹¬ä¾èµ–äºFrameWork é¡¹ç›®ç»“æ„: 1234567891011 +------------------------------+ | | +--------+ FrameWork +---+ | | | | | +-----------+------------------+ | | | |+--------v-------+ +-------v--------+ +--------v--------+| | | | | || User Comp | | Chat Comp | | Other Comp || | | | | |+----------------+ +----------------+ +-----------------+ æ­¤æ—¶ï¼Œå·²ç»åŸºæœ¬å®ç°äº†ç®€å•çš„æ¨¡å—åŒ–æ“ä½œï¼Œå¯æ˜¯è¿™æ ·çš„å·¥ç¨‹ç»“æ„æœ‰å¦‚ä¸‹é—®é¢˜ï¼š é¡¹ç›®é—´åŠŸèƒ½è°ƒç”¨æ— æ³•å®ç°ï¼šå¦‚ Chatæ¨¡å—è·Ÿ Useræ¨¡å—é—´çš„ç›¸äº’è°ƒç”¨ï¼ŒIMç™»é™†ç”¨åˆ°çš„ç”¨æˆ·å­—æ®µï¼Œç”¨æˆ·å­—æ®µä¸­è¦åŒ…å«IMä¸­çš„çŠ¶æ€ç­‰ç­‰ã€‚ èµ„æºæ–‡ä»¶é‡å¤ä½¿ç”¨é—®é¢˜ ä¸€ç³»åˆ—å…¶ä»–é—®é¢˜ å½“ç„¶ä»¥ä¸Šé—®é¢˜ä¹Ÿæ˜¯æœ‰è§£å†³æ–¹æ¡ˆçš„ï¼Œå¯ä»¥é€šè¿‡ä¸æ–­çš„å°† æ‰€è°“çš„ å…¬æœ‰åŠŸèƒ½è¿ç§»åˆ°Frameworkä¸­è§£å†³ï¼Œä¸è¿‡ï¼Œå°†ä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜ã€‚ FrameWork è¶Šæ¥è¶Šè‡ƒè‚¿çš„é—®é¢˜ã€‚ è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°çš„ã€‚ æ—©åœ¨2017å¹´æˆ‘å°±æå‡ºè¿‡ç»„å»ºå³æ’ä»¶çš„ç†è®ºã€‚æˆ‘ä»¬ä¹Ÿåœ¨å‘ç€è¿™ä¸ªç›®æ ‡å‘å±•ï¼Œä¸è¿‡å¦‚æœç»§ç»­ä½¿ç”¨ä¸Šè¿°çš„ç»„å»ºæ¨¡å‹ï¼Œå°†æ˜¯ç¾éš¾æ€§çš„åæœã€‚ æœ‰å¹¸åæ¥å¾—åˆ°äº†å¾—åˆ°äº†ä¸€æ¬¡æ–°é¡¹ç›®å¼€å‘çš„æœºä¼šã€‚æˆ‘ä»¬å°±æ­¤åœ¨æ–°é¡¹ç›®ä¸Šç»§ç»­æ¨è¿›æˆ‘ä»¬çš„ç»„å»ºæ¡†æ¶ã€‚ æ–°çš„ç»„ä»¶åŒ–æ¨è¿›ï¼šå…³äºç»„ä»¶åŒ–çš„æ€è·¯ï¼Œæˆ‘ä»¬å¼€å§‹åˆ†æä¸Šè¿°æ¨¡å‹ä¸­çš„å¤±è¯¯éƒ¨åˆ†ï¼Œæœ€å¤§çš„é—®é¢˜è¿˜æ˜¯è€¦åˆæ€§æ²¡æœ‰è§£å¼€ï¼Œå¦‚ä½•â€œå¼ºåˆ¶â€ çš„è®©ç»„å»ºä¹‹é—´é¢†ä¾èµ–æˆä¸ºä¸€ä¸ªä¸¥å³»çš„é—®é¢˜ã€‚ åŒæ—¶ä¸ºäº†å•ç‹¬ç¼–è¯‘ç»„å»ºçš„æ—¶å€™ä¸å°†æ— ç”¨ä»£ç ç¼–è¯‘è¿›å»ã€‚æˆ‘ä»¬è¿›è¡Œäº†æ–°çš„ç»„ä»¶åŒ–æ‹†åˆ†ã€‚ æ–°çš„ç»„ä»¶åŒ–æ¡†æ¶æ€è·¯ï¼š 1234567891011121314151617181920212223242526+-------------------------------------------------------------------+| || +------------+ +------------+ +----------+ +-----------+ || | Common | | Birdge | | UiLibs | | Other | || | | | | | | | | || +------------+ +------------+ +----------+ +-----------+ || || BaseModule |+---------------+----------------------------+----------------------+ | | | | | | +------------v----------------------------v-------------------+ | | | +----------+ +----------+ +----------+ +--------+ | | | User | | Home | | Feed | | Search | | | +----------+ +----------+ +----------+ +--------+ | | | | Function Module | +-------------------------------------------------------------+ +----------------------------+ | | | App Wrapper | | | +----------------------------+ Base Module ç¼–è¯‘ç±»å‹ä¸ºAndroidçš„libraryã€‚ Commonæä¾›å·¥ç¨‹çš„åŸºç¡€æ”¯æ’‘ï¼ŒåŸæœ‰çš„ commonä¸­å¤§éƒ¨åˆ†é‡å çš„åŠŸèƒ½éƒ½æ”¾åœ¨äº†è¿™é‡Œã€‚ Bridge ä¸­ä¸ºå·¥ç¨‹çš„ ã€æ¥å£è§„èŒƒã€‘å’Œæ‰€æœ‰çš„Beanã€‚ UiLibs ä¸ºå·¥ç¨‹ä¸­è¦åˆ°çš„åŸºç¡€UIæ§ä»¶å’Œèµ„æºã€‚ Other ä¸­åŒ…å«å…¶ä»–åŸºç¡€ç»„ä»¶æ”¯æŒï¼Œå¦‚ push ,plugin ï¼Œplayerç­‰ Function Module ç¼–è¯‘ç±»å‹éšå¼€å…³æ”¹å˜å·¥ç¨‹çš„ä¸šåŠ¡ç»„ä»¶ï¼ŒåŒ…å«ä¸€ä¸ªå¯è°ƒè¯•çš„ TestActivity å’Œä¸€ä¸ª å¯è°ƒè¯•çš„ DebugApplicationã€‚ä¼šåœ¨ç¼–è¯‘ä¸ºå·¥ç¨‹çš„æ—¶å€™è‡ªåŠ¨å‰”é™¤æ‰ã€‚ å…¶ä»–ä¸ºä¸€äº›å•ç‹¬çš„ä¸šåŠ¡åŠŸèƒ½ã€‚ å’Œå…¶ä»–å¸¸è§çš„ç»„ä»¶åŒ–æ¡†æ¶ç›¸æ¯”ä¹Ÿæ²¡æœ‰ç‰¹åˆ«ä¹‹å¤„ã€‚éƒ½æ˜¯é€šè¿‡sourceSets æ¥æ§åˆ¶çš„ã€‚ 12345678910111213sourceSets &#123; main &#123; if (isModule.toBoolean()) &#123; manifest.srcFile 'src/main/module/AndroidManifest.xml' &#125; else &#123; manifest.srcFile 'src/main/AndroidManifest.xml' java &#123; exclude 'debug/**' &#125; &#125; jniLibs.srcDirs = ['libs'] &#125;&#125; å…¶ä¸­ isModule æ˜¯å·¥ç¨‹ä¸­å®šä¹‰çš„ç»„ä»¶åŒ–å¼€å…³,å®šä¹‰åœ¨å·¥ç¨‹æ ¹ç›®å½•çš„ gradle.propertiesæ–‡ä»¶ä¸­ã€‚ ä¸¤ä¸ªé­”æ³•èˆ¬çš„æ³¨è§£@AutoInit å’Œ @BindLife@AutoInit æ˜¯ä¸€ä¸ª è¿œç¨‹ ä¾èµ–å¼•å…¥çš„æ³¨è§£ã€‚å®ƒå¯å°†åˆ«çš„Moduleä¸‹çš„å…·ä½“å®ç° å¼•å…¥åˆ°å½“å‰è¿™ä¸ªä¸å¯è§çš„èŒƒå›´å†…ã€‚æ¯”å¦‚ User å·¥ç¨‹ä¸­ æœ‰ä¸€ä¸ª UserManageræ§åˆ¶ç”¨æˆ·çš„ç™»å½•é€€å‡ºæ“ä½œ ï¼Œè€ŒChat å·¥ç¨‹ä¸­ï¼Œè¦æ£€æµ‹ç™»é™†ï¼Œè¿™ä¸¤ä¸ªå·¥ç¨‹æ˜¯ ä¸èƒ½ç›¸äº’ä¾èµ–çš„ã€‚æˆ‘ä»¬çš„æ–¹æ¡ˆï¼š Bridge ä¸­ å®šä¹‰ IUserManager12345678910public interface IUserManager &#123; boolean isLogin(); UserBean getCurrentUser(); void logout(); void login(UserBean userBean);&#125; Chatå·¥ç¨‹ä¸­å¼•ç”¨12345678910111213141516public class ChatManager &#123; //æ³¨æ„è¿™é‡Œï¼Œåœ¨æ¨¡å—å¼€å‘é˜¶æ®µï¼Œè¿™é‡Œå¯å®šä¹‰æˆ debugåŒ…ä¸‹çš„ç©ºå®ç°ç±» @AutoInit(implclass= \"com.yixia.chat.debug.DebugUserManager\") IUserManager mUserManager; public boolean conn(ChatUserBean _chatuser,boolean shouldReConn)&#123; //... if(!mUserManager.isLogin)&#123; return false; &#125; //... &#125;&#125; åŒæ—¶ï¼ŒChat å·¥ç¨‹ä¸­å¯åœ¨debugåŒ…ä¸­å®šä¹‰ä¸€ä¸ªç©ºçš„å®ç°ç±»123456789101112131415161718public class DebugUserManager implements IUserManager&#123; private UserBean mUser = null; public boolean isLogin()&#123; return mUser != null; &#125; public UserBean getCurrentUser()&#123; return mUser; &#125; public void logout()&#123; mUser = null; &#125; public void login(UserBean userBean)&#123; mUser = userBean; &#125;&#125; ç­‰åˆ°è”åˆç¼–è¯‘æœŸé—´ï¼Œå¯å°†å¸¦æœ‰è°ƒè¯•åŠŸèƒ½çš„ @AutoInit æ³¨è§£æ›¿æ¢æ‰ã€‚ ä»¥è¾¾åˆ°è§£è€¦ï¼ŒåŒæ­¥å¼€å‘çš„ç›®çš„ã€‚ @BindLife æ³¨è§£ @BindLife æ³¨è§£ é¡¾åæ€ä¹‰ï¼Œæ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸç»‘å®šæ³¨è§£ï¼ŒExample: åœ¨AppWrapperä¸­ï¼Œæˆ‘ä»¬å®šä¹‰çš„applicationå¦‚ä¸‹ã€‚ 1234567891011public class AppContext extends BaseApp &#123; @AutoInit(implClass = \"com.yixia.videoeditor.home.HomeApp\") @BindLife(isBefore = false) public IHomeApp mHomeApp; public void onCreate() &#123; super.onCreate(); &#125;&#125; åœ¨Bridgeä¸­å®šä¹‰çš„IHomeAppå¦‚ä¸‹ã€‚ 123public interface IHomeApp &#123; void onCreate(IBaseAppContext app);&#125; å…·ä½“çš„å®ç°ç±»åœ¨ Home Moduleä¸­ã€‚ 12345678public class HomeApp implements IHomeApp &#123; public static final String TAG = \"HomeApp\"; @Override public void onCreate(IBaseAppContext app) &#123; //onCreateHome home &#125;&#125; ç»è¿‡æˆ‘ä»¬ç¼–è¯‘æœŸæ³¨è§£å¤„ç†ä¹‹åï¼ŒAppContext å˜æˆäº†å¦‚ä¸‹ 1234567891011public class AppContext extends BaseApp &#123; @AutoInit(implClass = \"com.yixia.videoeditor.home.HomeApp\") @BindLife(isBefore = false) public IHomeApp mHomeApp = new com.yixia.videoeditor.home.HomeApp(); public void onCreate() &#123; super.onCreate(); mHomeApp.onCreate(this); &#125;&#125; BindLifeæ³¨è§£ä¼šå°†åŒå,åŒå‚æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ä¸ºthisï¼‰çš„æ–¹æ³•ç»‘å®šã€‚","categories":[{"name":"android","slug":"android","permalink":"https://zyw.io/categories/android/"}],"tags":[{"name":"AOP","slug":"AOP","permalink":"https://zyw.io/tags/AOP/"},{"name":"ç»„ä»¶åŒ–","slug":"ç»„ä»¶åŒ–","permalink":"https://zyw.io/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"},{"name":"tramsform","slug":"tramsform","permalink":"https://zyw.io/tags/tramsform/"}]}]}